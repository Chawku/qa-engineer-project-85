---
- summary: |
    Проверка регистрации нового пользователя с валидными данными
  requirement: |
    Пользователь должен иметь возможность зарегистрироваться при вводе корректных данных
  prerequisites: |
    Открыта главная страница (https://codebattle.hexlet.io/)
  test-data: |
    Email = новый email (пример: testuser@box.ru)
    Ник = testuser_101
    Пароль = Testdata101!
  steps:
    - Открыта главная страница (https://codebattle.hexlet.io/)
    - Нажать "Sign Up"
    - Ввести email
    - Ввести ник
    - Ввести пароль
    - Нажать кнопку "Submit"
  expected-result: |
    Пользователь успешно регистрируется и попадает на главную страницу

- summary: |
    Проверка регистрации с паролем, содержащим спецсимволы
  requirement: |
    Пользователь должен иметь возможность задать пароль длиной до 16 символов, включая спецсимволы
  prerequisites: |
    Открыта главная страница (https://codebattle.hexlet.io/)
  test-data: |
    Email = новый email (пример: user1@example.com)
    Ник = user1111
    Пароль = Pass!@#-?
  steps:
    - Открыта главная страница (https://codebattle.hexlet.io/)
    - Нажать "Sign Up"
    - Ввести email
    - Ввести ник
    - Ввести пароль Pass!@#-?
    - Нажать кнопку "Submit"
  expected-result: |
    Пользователь успешно регистрируется

- summary: |
    Невозможность регистрации с паролем длиннее 16 символов
  requirement: |
    Система должна отклонять пароль длиннее 16 символов
  prerequisites: |
    Открыта главная страница (https://codebattle.hexlet.io/)
  test-data: |
    Email = новый email (пример: user2@example.com)
    Ник = user2222
    Пароль = LongPassword!12345 (17 символов)
  steps:
    - Открыта главная страница (https://codebattle.hexlet.io/)
    - Нажать "Sign Up"
    - Ввести email
    - Ввести ник
    - Ввести пароль LongPassword!12345
    - Нажать кнопку "Submit"
  expected-result: |
    Отображается ошибка "Should be from 6 to 16 characters"

- summary: |
    Невозможность регистрации с ником, содержащим спецсимволы
  requirement: |
    Ник должен содержать только буквы, цифры и допустимые символы (_ или -)
  prerequisites: |
    Открыта главная страница (https://codebattle.hexlet.io/)
  test-data: |
    Email = новый email (пример: user3@example.com)
    Ник = user3333!@#
    Пароль = Pass123!
  steps:
    - Открыта главная страница (https://codebattle.hexlet.io/)
    - Нажать "Sign Up"
    - Ввести email
    - Ввести ник user!@#
    - Ввести пароль
    - Нажать кнопку "Submit"
  expected-result: |
    Отображается ошибка "Must consist of Latin letters, numbers and underscores. Only begin with latin letter"

- summary: |
    Проверка регистрации с ником длиной до 16 символов
  requirement: |
    Ник должен быть не длиннее 16 символов
  prerequisites: |
    Открыта главная страница (https://codebattle.hexlet.io/)
  test-data: |
    Email = новый email (пример: user4@example.com)
    Ник = usernickname1234 (16 символов)
    Пароль = Pass123!
  steps:
    - Открыта главная страница (https://codebattle.hexlet.io/)
    - Нажать "Sign Up"
    - Ввести email
    - Ввести ник
    - Ввести пароль
    - Нажать кнопку "Submit"
  expected-result: |
    Пользователь успешно регистрируется

- summary: |
    Невозможность регистрации с ником длиннее 16 символов
  requirement: |
    Система должна отклонять ник длиннее 16 символов
  prerequisites: |
    Открыта главная страница (https://codebattle.hexlet.io/)
  test-data: |
    Email = новый email (пример: user5@example.com)
    Ник = usernickname12345 (17 символов)
    Пароль = Pass123!
  steps:
    - Открыта главная страница (https://codebattle.hexlet.io/)
    - Нажать "Sign Up"
    - Ввести email
    - Ввести ник
    - Ввести пароль
    - Нажать кнопку "Submit"
  expected-result: |
    Отображается ошибка "Should be from 3 to 16 characters"

- summary: |
    Невозможность регистрации с некорректным email (без @)
  requirement: |
    Email должен соответствовать формату user@example.com
  prerequisites: |
    Открыта главная страница (https://codebattle.hexlet.io/)
  test-data: |
    Email = новый email (пример: userexample.com)
    Ник = user6666
    Пароль = Pass123!
  steps:
    - Открыта главная страница (https://codebattle.hexlet.io/)
    - Нажать "Sign Up"
    - Ввести email без @
    - Ввести ник
    - Ввести пароль
    - Нажать кнопку "Submit"
  expected-result: |
    Отображается ошибка "Invalid email"

- summary: |
    Проверка регистрации с email, содержащим спецсимволы
  requirement: |
    Email должен допускать символы точка (.), подчеркивание (_) и дефис (-)
  prerequisites: |
    Открыта главная страница (https://codebattle.hexlet.io/)
  test-data: |
    Email = новый email (пример: user.name-12_test@example.com)
    Ник = user7777
    Пароль = Pass123!
  steps:
    - Открыта главная страница (https://codebattle.hexlet.io/)
    - Нажать "Sign Up"
    - Ввести email user.name-12_test@example.com
    - Ввести ник
    - Ввести пароль
    - Нажать кнопку "Submit"
  expected-result: |
    Пользователь успешно регистрируется

- summary: |
    Проверка входа пользователя с существующими логином и паролем
  requirement: |
    При верном вводе логина и пароля пользователь должен войти в систему
  prerequisites: |
    Открыта главная страница (https://codebattle.hexlet.io/)
    Существующий пользователь зарегистрирован в системе
  test-data: |
    Логин = testuser101
    Пароль = Testdata101!
  steps:
    - Открыта главная страница (https://codebattle.hexlet.io/)
    - Нажать "Sign In"
    - Ввести логин
    - Ввести пароль
    - Нажать кнопку "Submit"
  expected-result: |
    Пользователь попадает в меню игры

- summary: |
    Проверка входа через GitHub
  requirement: |
    Пользователь должен иметь возможность авторизоваться через GitHub
  prerequisites: |
    Открыта страница входа
    У пользователя есть действующий аккаунт GitHub
  test-data: |
    Аккаунт GitHub
  steps:
    - Нажать кнопку "Sign up with GitHub"
    - Ввести GitHub логин и пароль
    - Подтвердить вход
  expected-result: |
    Пользователь успешно авторизован и перенаправлен в систему

- summary: |
    Проверка входа через Discord
  requirement: |
    Пользователь должен иметь возможность авторизоваться через Discord
  prerequisites: |
    Открыта страница входа
    У пользователя есть действующий аккаунт Discord
  test-data: |
    Аккаунт Discord
  steps:
    - Нажать кнопку "Sign up with Discord"
    - Ввести логин и пароль от Discord
    - Подтвердить вход
  expected-result: |
    Пользователь успешно авторизован и перенаправлен в систему

- summary: |
    Проверка создания игры против бота
  requirement: |
    Пользователь должен иметь возможность начать игру против бота
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Режим игры = с ботом
  steps:
    - Нажать кнопку "Create game"
    - Выбрать опцию "With bot"
    - Оставить остальные опции по умолчанию
    - Нажать "Create battle"
  expected-result: |
    Игра с ботом успешно создается, открывается редактор задач

- summary: |
    Проверка отображения задачи в игре
  requirement: |
    Пользователь должен видеть описание задачи и условия
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Нет тестовых данных
  steps:
    - Нажать кнопку "Create game"
    - Выбрать опцию "With bot"
    - Оставить остальные опции по умолчанию
    - Нажать "Create battle"
    - Проверить интерфейс
  expected-result: |
    Отображается текст задачи, тестовые данные и кнопка для отправки решения

- summary: |
    Проверка работы редактора кода
  requirement: |
    Пользователь должен иметь возможность писать и редактировать код в редакторе
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Код = print("Hello Codebattle")
  steps:
    - Нажать кнопку "Create game"
    - Выбрать опцию "With bot"
    - Оставить остальные опции по умолчанию
    - Нажать "Create battle"
    - Ввести код в редактор
  expected-result: |
    Код отображается в редакторе и сохраняется

- summary: |
    Проверка окончания игры по времени
  requirement: |
    Игра должна автоматически завершаться при истечении времени
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Нет
  steps:
    - Нажать кнопку "Create game"
    - Выбрать опцию "With bot"
    - Оставить остальные опции по умолчанию
    - Нажать "Create battle"
    - Играть до истечения времени
  expected-result: |
    Игра автоматически завершается, выводится результат

- summary: |
    Проверка отображения результатов игры
  requirement: |
    Пользователь должен видеть результаты после завершения игры
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Нет
  steps:
    - Нажать кнопку "Create game"
    - Выбрать опцию "With bot"
    - Оставить остальные опции по умолчанию
    - Нажать "Create battle"
    - Завершить игру
  expected-result: |
    Отображается решение, время и победитель

- summary: |
    Проверка чата во время игры
  requirement: |
    Пользователь должен иметь возможность отправлять и получать сообщения в чате
  prerequisites: |
    Создана игра между двумя пользователями
  test-data: |
    Сообщение = "Привет!"
  steps:
    - Открыть окно чата
    - Ввести сообщение "Привет!"
    - Нажать кнопку "Send"
  expected-result: |
    Сообщение отображается в чате и доступно другому игроку

- summary: |
    Проверка отображения таблицы лидеров
  requirement: |
    Пользователь должен иметь возможность просматривать таблицу лидеров
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Нет
  steps:
    - Находится на главной странице
  expected-result: |
    Отображается таблица лидеров с рейтингами пользователей

- summary: |
    Проверка восстановления пароля с помощью email
  requirement: |
    Пользователь должен иметь возможность восстановить пароль через email
  prerequisites: |
    Открыта главная страница (https://codebattle.hexlet.io/)
  test-data: |
    Email = testshrimp101@inbox.ru
  steps:
    - Нажать кнопку "Sign in"
    - Нажать кнопку "Forgot your password?"
    - Ввести email
    - Открыть письмо и перейти по ссылке
    - Ввести новый пароль
    - Открыть главную страницу (https://codebattle.hexlet.io/)
    - Нажать "Sign In"
    - Ввести логин и новый пароль
    - Нажать "Submit"
  expected-result: |
    Пользователю отправляется письмо с инструкцией по восстановлению пароля и он может восстановить пароль

- summary: |
    Проверка входа с пустыми полями
  requirement: |
    При пустом логине или пароле система должна показать сообщение об ошибке
  prerequisites: |
    Открыта страница логина
  test-data: |
    Нет тестовых данных
  steps:
    - Не вводить логин
    - Не вводить пароль
    - Нажать кнопку "Submit"
  expected-result: |
    Отображается сообщение об ошибке

- summary: |
    Проверка регистрации с уже существующим email
  requirement: |
    При попытке зарегистрировать аккаунт с уже существующим email система должна показать сообщение об ошибке
  prerequisites: |
    Существует пользователь с email testshrimp101@inbox.ru
  test-data: |
    Email = testshrimp101@inbox.ru
    Ник = testuser1000
    Пароль = Testdata101!
  steps:
    - Ввести email user@example.com
    - Ввести новый ник
    - Ввести пароль
    - Нажать кнопку "Submit"
  expected-result: |
    Отображается сообщение об ошибке "Email is already taken"

- summary: |
    Проверка отправки инвайта другу в игру
  requirement: |
    Пользователь должен иметь возможность создать игру и пригласить друга по ссылке
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Нет тестовых данных
  steps:
    - Нажать кнопку "Create a game"
    - Выбрать тип игры "With other user"
    - Оставить остальные параметры по умолчанию
    - Скопировать приглашение (ссылку)
  expected-result: |
    Отображается ссылка-приглашение, которую можно отправить другу

- summary: |
    Проверка присоединения к игре по инвайту
  requirement: |
    Пользователь должен иметь возможность присоединиться к игре по полученной ссылке-приглашению
  prerequisites: |
    У первого пользователя создана игра и сгенерирована ссылка-приглашение
    Второй пользователь авторизован
  test-data: |
    Ссылка-приглашение
  steps:
    - Нажать кнопку "Create a game"
    - Выбрать "With other user"
    - Оставить остальные параметры по умолчанию
    - Нажать "Create battle"
    - Скопировать ссылку
    - Открыть ссылку в браузере под вторым пользователем
    - Принять приглашение
  expected-result: |
    Игра создается между двумя пользователями и открывается экран с задачей

- summary: |
    Проверка отмены создания игры по ссылке
  requirement: |
    Пользователь должен иметь возможность отменить создание игры по ссылке
  prerequisites: |
    У первого пользователя создана игра и сгенерирована ссылка-приглашение
  test-data: |
    Нет тестовых данных
  steps:
    - Нажать кнопку "Create a game"
    - Выбрать "With other user"
    - Оставить остальные параметры по умолчанию
    - Нажать "Create battle"
    - Нажать "Cancel" возле ссылки
  expected-result: |
    Приглашение отменяется, игра не создается

- summary: |
    Проверка отображения кода соперника в реальном времени
  requirement: |
    Пользователь должен видеть вводимый код соперника
  prerequisites: |
    Создана игра между двумя пользователями
  test-data: |
    Нет тестовых данных
  steps:
    - Создать игру
    - Соперник вводит код (например, print("Hello"))
  expected-result: |
    Код соперника отображается в реальном времени

- summary: |
    Проверка завершения игры при правильном решении задачи
  requirement: |
    При успешном решении задачи игра должна завершиться и отобразить победителя
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Язык программирования: NodeJS
    Задание: rect_area
    Правильное решение:
        const _ = require("lodash");
        const R = require("rambda");

        const solution = (width, length) => {
      return width * length;
        };

        module.exports = solution;
  steps:
    - Нажать кнопку "Create game"
    - Выбрать опцию "With bot"
    - Выбрать задание rect_area
    - Оставить остальные опции по умолчанию
    - Нажать "Create battle"
    - Выбрать язык программирования NodeJS
    - Ввести правильное решение задачи
    - Нажать кнопку "Run"
  expected-result: |
    Игра завершается, отображается результат и победитель

- summary: |
    Проверка просмотра истории игр пользователя и статистики
  requirement: |
    Пользователь должен иметь возможность просматривать историю своих игр
  prerequisites: |
    Пользователь авторизован
    У пользователя есть завершённые игры
  test-data: |
    Нет
  steps:
    - Нажать на иконку профиля
    - Нажать "My profile"
  expected-result: |
    Отображается список завершённых игр с результатами и статистика

- summary: |
    Проверка отображения деталей завершенной игры
  requirement: |
    Пользователь должен иметь возможность просмотреть подробности завершённой игры
  prerequisites: |
    Пользователь авторизован
    В истории игр есть завершённые игры
  test-data: |
    Нет тестовых данных
  steps:
    - Нажать на иконку профиля
    - Нажать "My profile"
    - Нажать "Completed games"
    - Нажать "Show" на одной из игр
  expected-result: |
    Отображается экран с деталями игры: участники, их решения, результат, время

- summary: |
    Проверка отправки слишком длинного сообщения в чате
  requirement: |
    Сообщения в чате должны иметь ограничение по длине
  prerequisites: |
    Пользователь в лобби
  test-data: |
    Сообщение = строка длиной 2000 символов
  steps:
    - Ввести длинное сообщение
    - Нажать кнопку "Send"
  expected-result: |
    Сообщение не отправляется, отображается ошибка "Message length cannot exceed 1024 characters."

- summary: |
    Проверка смены языка интерфейса на русский
  requirement: |
    Пользователь должен иметь возможность переключать язык интерфейса на русский
  prerequisites: |
    Пользователь авторизован
    На сайте доступны несколько языков (например, русский и английский)
  test-data: |
    Язык = English
  steps:
    - Нажать на иконку профиля
    - Нажать "Settings"
    - В "Locale" выбрать "Ru"
    - Нажать "Save"
    - Перезагрузить страницу
  expected-result: |
    Интерфейс меняется на русский язык, все элементы переведены корректно

- summary: |
    Проверка смены языка интерфейса на английский
  requirement: |
    Пользователь должен иметь возможность переключать язык интерфейса на английский
  prerequisites: |
    Пользователь авторизован
    На сайте доступны несколько языков (например, русский и английский)
  test-data: |
    Язык = Russian
  steps:
    - Нажать на иконку профиля
    - Нажать "Settings"
    - В "Locale" выбрать "Eng"
    - Нажать "Save"
    - Перезагрузить страницу
  expected-result: |
    Интерфейс меняется на английский язык, все элементы переведены корректно

- summary: |
    Проверка кроссбраузерности сайта
  requirement: |
    Сайт должен корректно работать в последних версиях популярных браузеров
  prerequisites: |
    Нет специальных условий
  test-data: |
    Браузеры = Google Chrome, Mozilla Firefox, Microsoft Edge, Safari
    Сайт = https://codebattle.hexlet.io/
  steps:
    - Открыть сайт в Google Chrome
    - Проверить загрузку главной страницы
    - Проверить корректное отображение шапки, меню, кнопок и иконок
    - Перейти на страницу регистрации и убедиться, что форма отображается корректно
    - Зарегистрировать нового пользователя
    - Выйти из аккаунта и выполнить вход заново
    - Проверить отображение таблицы лидеров
    - Создать игру с ботом
    - Проверить работу редактора кода (ввод, удаление, подсветка синтаксиса)
    - Проверить отображение задачи и тестов
    - Проверить чат
    - Проверить отображение таймера и статуса игры
    - Завершить игру и перейти на страницу результатов
    - Нажать на иконку профиля и убедиться, что данные отображаются корректно
    - Нажать на "My Profile" и убедиться, что данные отображаются корректно
    - Повторить те же действия в Mozilla Firefox
    - Повторить те же действия в Microsoft Edge
    - Повторить те же действия в Safari
  expected-result: |
    Все функции работают корректно во всех тестируемых браузерах

- summary: |
    Проверка отображения сайта на мобильном устройстве (адаптивность)
  requirement: |
    Сайт должен корректно отображаться на экране мобильного устройства
  prerequisites: |
    Открыть браузер на мобильном устройстве или использовать эмуляцию мобильного viewport в инструментах разработчика
  test-data: |
    Устройство: iPhone 12 Pro, разрешение 390x844
  steps:
    - Открыть сайт в браузере
    - Включить DevTools
    - Переключить режим устройства
    - Проверить загрузку главной страницы
    - Проверить корректное отображение шапки, меню, кнопок и иконок
    - Перейти на страницу регистрации и убедиться, что форма отображается корректно
    - Зарегистрировать нового пользователя
    - Выйти из аккаунта и выполнить вход заново
    - Проверить отображение таблицы лидеров
    - Создать игру с ботом
    - Проверить работу редактора кода (ввод, удаление, подсветка синтаксиса)
    - Проверить отображение задачи и тестов
    - Проверить чат
    - Проверить отображение таймера и статуса игры
    - Завершить игру и перейти на страницу результатов
    - Нажать на иконку профиля и убедиться, что данные отображаются корректно
    - Нажать на "My Profile" и убедиться, что данные отображаются корректно
  expected-result: |
    Интерфейс сайта адаптируется под выбранное разрешение, все элементы остаются доступными и читаемыми

- summary: |
    Проверка работы cookie для сохранения сессии пользователя
  requirement: |
    Сайт должен сохранять данные о сессии пользователя с помощью cookie, чтобы пользователь оставался авторизованным после закрытия браузера
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Нет тестовых данных
  steps:
    - Авторизоваться на сайте
    - Закрыть браузер
    - Открыть сайт снова
  expected-result: |
    Пользователь остаётся авторизованным благодаря сохранённым cookie

- summary: |
    Проверка защиты от XSS (Cross-Site Scripting)
  requirement: |
    Сайт должен предотвращать выполнение вредоносных скриптов, введённых пользователем
  prerequisites: |
    Открыт чат
  test-data: |
    Сообщение = "<script>alert('XSS');</script>"
  steps:
    - Ввести скрипт в форму ввода
    - Нажать "Send"
  expected-result: |
    Скрипт не выполняется, сообщение отображается как текст, без выполнения кода

- summary: |
    Проверка защиты от SQL-инъекции
  requirement: |
    Сайт должен предотвращать выполнение вредоносных SQL-запросов через чат
  prerequisites: |
    Пользователь авторизован
    Открыт чат
  test-data: |
    Сообщение = "' OR '1'='1'; --"
  steps:
    - Ввести сообщение в чат
    - Нажать "Send"
  expected-result: |
    Сообщение отображается как текст, без выполнения SQL-команд
    Структура базы данных остаётся безопасной, сообщения других пользователей не изменяются
